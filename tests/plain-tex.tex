%!TeX program = luatex
\input lua-widow-control.sty

% Emulate standard LaTeX settings for ease of testing
\hsize=345pt
\hoffset=62pt
\vsize=550pt
\voffset=56pt

\def\filler{
    \input knuth

    \input bryson

    \input knuth

    \input bryson

    \input knuth
}

\def\tests{
    This is a short paragraph. It is exactly two lines long; just enough to make an orphan or a widow.

    \filler

    \vfill\eject

    This is a short paragraph. It is exactly one line long.

    \filler

    \vfill\eject
}

\LuaWidowControlDisable

\tests

\LuaWidowControlEnable

\tests

\bye
